<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <title></title>
</head>

<body>
  <canvas id="can"></canvas>
  <h3 id="s3">優勢</h3>
  <p id="s1">現在の黄</p>
  <p id="s2">現在の青</p>
  <script>
    const SCREEN_W = 800;
    const SCREEN_H = 500;
    let SCREEN_C = "gray";

    let x = 100;
    let y = 200;
    let sx = 30;
    let sy = 20;
    let vx = 3;
    let vy = 2;
    let BLOCK_C = "yellow";
    let drw = 60;
    let color =[ "yellow" , "blue"/*, "orange" , "pink"*/];
    let random = 0;
    let i = 0;

    let s1=400;
    let s2=400;
    let s = 0;
    let ad = 0;

    let elm = document.getElementById("can");
    let con = elm.getContext("2d");
    let sen = document.getElementById("s3");

    elm.width = SCREEN_W;
    elm.height = SCREEN_H;
    elm.style.backgroundColor = SCREEN_C;

    setInterval(main, 1000 / drw);

    function main() {

      //con.clearRect(0, 0, SCREEN_W, SCREEN_H);

      sx = Math.floor(Math.random()*90)+11;
      sy = Math.floor(Math.random()*90)+11;
      x = Math.floor(Math.random()*800)+1;
      y = Math.floor(Math.random()*500)+1;
      random = Math.floor(Math.random()*color.length);

      BLOCK_C = color[random];

      ad = s1+s2;
      sss = x*y;
      ss = sss/4000;
      s = ss/ad;

      console.log(s);

      if(BLOCK_C == color[0]){
        s1+=s;
        s2-=s;
      }else if(BLOCK_C == color[1]){
        s2+=s;
        s1-=s;
      }

      document.getElementById("s1").textContent = "現在の黄："+(s1-399);
      document.getElementById("s2").textContent = "現在の青："+(s2-399);

      if(s1<s2){
        sen.textContent = "優勢：　　青";
        //s1+=(50/40000);
        //s2-=(50/40000);
      }else if(s2<s1){
        sen.textContent = "優勢：黄";
        //s2+=(50/40000);
        //s1-=(50/40000);
      }else if (s1==s2){
        sen.textContent = "互角";
      }

      x += vx;
      y += vy;
      i ++;

      con.fillRect(x, y, sx, sy);
      con.fillStyle = BLOCK_C;

      if (x <= 0 || x + sx >= SCREEN_W) {
        vx *= -1;
      }

      if (y <= 0 || y + sy >= SCREEN_H) {
        vy *= -1;
      }

    }
  </script>
</body>

</html>
